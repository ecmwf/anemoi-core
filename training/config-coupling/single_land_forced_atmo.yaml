defaults:
- data: zarr_single_land_forced_atmo
- dataloader: native_grid_single_land_forced_atmo
- datamodule: single
- diagnostics: evaluation
- hardware: slurm
- graph: encoder_decoder_only  # encoder_decoder_only_single
- model: transformer_single_land_forced_atmo
- training: default_single_land_forced_atmo
- _self_

### This file is for local experimentation.
##  When you commit your changes, assign the new features and keywords
##  to the correct defaults.
# For example to change from default GPU count:

config_validation: False  # True

hardware:
  num_gpus_per_model: 1

diagnostics:
  plot:
    frequency: # Frequency of the plotting
      batch: 7500
  log:
    mlflow:
      enabled: True
      offline: False  # True  # False
      experiment_name: 'coupling_land'
      run_name: 'land_forced_atmo'
      terminal: True
      authentication: True
  # plot:
  #   callbacks: []

model:
  num_channels: 1024

dataloader:
  batch_size:
    training: 1
    validation: 1
  limit_batches:
    training: null
    validation: null

training:
  # max_epochs: 67
  max_steps: 150000
  lr:
    # rate: 3.125e-5  # Do I need to multiply by 4 if only have 4 nodes on ATOS?
    rate: 1.25e-4  # 3.125e-5 * 4 for ATOS change make for 16-node runs!!
    iterations: 150000
    min: 3e-7  # Not scaled by GPU

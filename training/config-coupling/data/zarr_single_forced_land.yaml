format: zarr
resolution: o96  # n320
# Time frequency requested from dataset
frequency: 6h
# Time step of model (must be multiple of frequency)
timestep: 6h

# features that are not part of the forecast state
# but are used as forcing to generate the forecast state
forcing:
- "cos_latitude"
- "cos_longitude"
- "sin_latitude"
- "sin_longitude"
- "cos_julian_day"
- "cos_local_time"
- "sin_julian_day"
- "sin_local_time"
- "insolation"
- "lsm"
- "sdor"
- "slor"
- "z"
- "t_925"
- "u_925"
- "v_925"
- "q_925"
- "z_925"
- "sp"
- "cvh"
- "cvl"
- "tvh"
- "tvl"
- "lai_lv"
- "lai_hv"
- "cl"
- "glacier_mask"
- "slt"
- "ssrd"
- "strd"
- "sf"
- "tp"
- "cp"

# features that are only part of the forecast state
# but are not used as the input to the model
diagnostic:
  - snowc
  - ro
remapped:

normalizer:
  default: "mean-std"
  remap:
    cp: tp
    sf: tp
    ro: tp
  std:
    - "tp"
    - "cp"
    - "sf"
    - "q_925"
    - "ro"
  min-max:
  max:
    - "sdor"
    - "slor"
    - "z"
    - "tvl"
    - "tvh"
    - "slt"
  none:
    - "cos_latitude"
    - "cos_longitude"
    - "sin_latitude"
    - "sin_longitude"
    - "cos_julian_day"
    - "cos_local_time"
    - "sin_julian_day"
    - "sin_local_time"
    - "insolation"
    - "lsm"
    - "cvh"
    - "cvl"
    - "cl"
    - "glacier_mask"
    # - "swvl1"
    # - "swvl2"
    # - "swvl3"
    - "snowc"
    - "sd"

imputer:
  default: "none"
  minimum:
    # - "swvl1"
    # - "swvl2"
    # - "swvl3"
    - "ro"
    - "snowc"
    - "sd"
    - "cvh"
    - "cvl"
    - "tvh"
    - "tvl"
    - "slt"
    - "lai_lv"
    - "lai_hv"
    - "cl"
    - "glacier_mask"
  mean:
    - "stl1"
    - "stl2"
    - "stl3"
    - "swvl1"
    - "swvl2"
    - "swvl3"

remapper:
  default: "none"

# processors including imputers and normalizers are applied in order of definition
processors:
  imputer:
    _target_: anemoi.models.preprocessing.imputer.InputImputer
    _convert_: all
    config: ${data.imputer}
  normalizer:
    _target_: anemoi.models.preprocessing.normalizer.InputNormalizer
    config: ${data.normalizer}
  # remapper:
  #   _target_: anemoi.models.preprocessing.remapper.Remapper
  #   _convert_: all
  #   config: ${data.remapper}

# Values set in the code
num_features: null  # number of features in the forecast state

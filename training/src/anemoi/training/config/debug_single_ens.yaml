defaults:
- data: zarr
- dataloader: native_grid
- diagnostics: evaluation_ens
- system: example
- graph: multi_scale
- model: graphtransformer_ens
- training: ensemble
- _self_

config_validation: False

### This file is for local experimentation.
##  When you commit your changes, assign the new features and keywords
##  to the correct defaults.
# For example to change from default GPU count:
# hardware:
#   num_gpus_per_node: 1

diagnostics:
  # plot:
  #   callbacks: []
  log:
    mlflow:
      enabled: False
      tracking_uri: None
    wandb:
      enabled: False
      entity: example

system:
  input:
    graph: graph_anemoi_new_${data.resolution}.pt
    dataset: /home/mlx/ai-ml/datasets/aifs-ea-an-oper-0001-mars-${data.resolution}-1979-2023-6h-v8.zarr
    truncation: ${data.resolution}-o32-linear.mat.npz
    truncation_inv: o32-${data.resolution}-linear.mat.npz
  output:
    root: ${oc.env:SCRATCH}/anemoi-test/${data.resolution}/

  hardware:
    accelerator: auto
    num_gpus_per_ensemble: 1
    num_gpus_per_node: 1
    num_nodes: 1
    num_gpus_per_model: 1

model:
  num_channels: 128
dataloader:
  limit_batches:
    training: 20
    validation: 20

training:
  ensemble_size_per_device: 2
  max_epochs: 1

data:
  resolution: o96  # Global resolution setting used in hardware file paths
  # Time frequency requested from dataset
  frequency: 6h
  # Time step of model (must be multiple of frequency)
  timestep: 6h

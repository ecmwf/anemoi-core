format: zarr
# Time frequency requested from dataset
frequency: 6h
# Time step of model (must be multiple of frequency)
timestep: 6h

sources:
  low_res:
    dataset: aifs-od-an-oper-0001-mars-o96-2016-2023-6h-v6
    # dataset: aifs-od-an-oper-0001-mars-o32-2020-2020-6h-v6-for-software-testing
    # processors including imputers and normalizers are applied in order of definition
    normaliser:
      _target_: anemoi.models.preprocessing.normalizer.InputNormalizer
      config: ${data.normaliser}

  high_res:
    dataset: cerra-rr-an-oper-0001-mars-5p5km-1984-2020-6h-v2-hmsi
    # dataset: cerra-rr-an-oper-0001-mars-5p5km-2020-2020-6h-v2-hmsi-thinned-for-software-testing
    # processors including imputers and normalizers are applied in order of definition
    normaliser:
      _target_: anemoi.models.preprocessing.normalizer.InputNormalizer
      config: ${data.normaliser}

normaliser:
  default: "mean-std"

  # Remap cp statistics to those of tp when using FractionBounding. This ensures
  # that cp, as a fraction of tp, remains consistent with tp's scale and statistics.
  # NOTE: This remap should only be applied if FractionBounding is enabled for cp.
  # remap:
  #   cp: tp

  # Standardization applied to tp and cp variables. Ensure that if cp is bounded
  # as a fraction of tp, both variables are normalized using these shared statistics.
  # "Std" normalization is preferred here over "mean-std" to avoid shifting of the
  # zero value in the normalized space.
  std:
  - "tp"
  - "cp"

  min-max:
  max:
  - "sdor"
  - "slor"
  - "z"
  none:
  - "cos_latitude"
  - "cos_longitude"
  - "sin_latitude"
  - "sin_longitude"
  - "cos_julian_day"
  - "cos_local_time"
  - "sin_julian_day"
  - "sin_local_time"
  - "insolation"
  - "lsm"

imputer:
  default: "none"
remapper:
  default: "none"

# Values set in the code
num_features: null # number of features in the forecast state

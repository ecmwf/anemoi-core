prefetch_factor: 2
pin_memory: True

# ============
# read_group_size:
#   Form subgroups of model comm groups that read data together.
#   Each reader in the group only reads 1/read_group_size of the data
#   which is then all-gathered between the group.
#   This can reduce CPU memory usage as well as increase dataloader throughput.
#   The number of GPUs per model must be divisible by read_group_size.
#   To disable, set to 1.
# ============
read_group_size: ${hardware.num_gpus_per_model}

num_workers:
  training: 6
  validation: 6
  test: 6
batch_size:
  training: 4
  validation: 4
  test: 4

# ============
# Default effective batch_size for training is 16
# For the o96 resolution, default per-gpu batch_size is 2 (8 gpus required)
# The global lr is calculated as:
# global_lr = local_lr * num_gpus_per_node * num_nodes / gpus_per_model
# Assuming a constant effective batch_size, any change in the per_gpu batch_size
# should come with a rescaling of the local_lr to keep a constant global_lr
# ============

# runs only N training batches [N = integer | null]
# if null then we run through all the batches
limit_batches:
  training: null
  validation: null
  test: 20

#Â set a custom mask for grid points.
# Useful for LAM (dropping unconnected nodes from forcing dataset)
grid_indices:
  _target_: anemoi.training.data.grid_indices.FullGrid
  nodes_name: ${graph.data}

dataset: ${hardware.paths.data}/${hardware.files.dataset}

training:
  dataset:
  - dataset: ${hardware.paths.data}/${hardware.files.dataset}
    start: null
    end: 2021
    frequency: ${data.frequency}
  - dataset: ${hardware.paths.data}/${hardware.files.dataset_ozone}
    start: null
    end: 2021
    frequency: ${data.frequency}
  start: null
  end: 2021
  drop: ['u_1', 'v_1', 'w_1', 'u_2', 'v_2', 'w_2', 'u_3', 'v_3', 'w_3', 'u_4', 'v_4', 'w_4', 'u_5', 'v_5', 'w_5', 'u_6', 'v_6', 'w_6', 'u_7', 'v_7', 'w_7', 'u_8', 'v_8', 'w_8', 'u_9', 'v_9', 'w_9', 'u_10', 'v_10', 'w_10', 'u_11', 'v_11', 'w_11', 'u_12', 'v_12', 'w_12', 'u_13', 'v_13', 'w_13', 'u_14', 'v_14', 'w_14', 'u_15', 'v_15', 'w_15', 'u_16', 'v_16', 'w_16', 'u_17', 'v_17', 'w_17', 'u_18', 'v_18', 'w_18', 'u_19', 'v_19', 'w_19', 'u_20', 'v_20', 'w_20', 'u_21', 'v_21', 'w_21', 'u_22', 'v_22', 'w_22', 'u_23', 'v_23', 'w_23', 'u_24', 'v_24', 'w_24', 'u_25', 'v_25', 'w_25', 'u_26', 'v_26', 'w_26', 'u_27', 'v_27', 'w_27', 'u_28', 'v_28', 'w_28', 'u_29', 'v_29', 'w_29', 'u_30', 'v_30', 'w_30', 'u_31', 'v_31', 'w_31', 'u_32', 'v_32', 'w_32', 'u_33', 'v_33', 'w_33', 'u_34', 'v_34', 'w_34', 'u_35', 'v_35', 'w_35', 'u_36', 'v_36', 'w_36', 'u_37', 'v_37', 'w_37', 'u_38', 'v_38', 'w_38', 'u_39', 'v_39', 'w_39', 'u_40', 'v_40', 'w_40', 'u_41', 'v_41', 'w_41', 'u_42', 'v_42', 'w_42', 'u_43', 'v_43', 'w_43', 'u_44', 'v_44', 'w_44', 'u_45', 'v_45', 'w_45', 'u_46', 'v_46', 'w_46', 'u_47', 'v_47', 'w_47', 'u_48', 'v_48', 'w_48', 'u_49', 'v_49', 'w_49', 'u_50', 'v_50', 'w_50', 'u_51', 'v_51', 'w_51', 'u_52', 'v_52', 'w_52', 'u_53', 'v_53', 'w_53', 'u_54', 'v_54', 'w_54', 'u_55', 'v_55', 'w_55', 'u_56', 'v_56', 'w_56', 'u_57', 'v_57', 'w_57', 'u_58', 'v_58', 'w_58', 'u_59', 'v_59', 'w_59', 'u_60', 'v_60', 'w_60', 'u_61', 'v_61', 'w_61', 'u_62', 'v_62', 'w_62', 'u_63', 'v_63', 'w_63', 'u_64', 'v_64', 'w_64', 'u_65', 'v_65', 'w_65', 'u_66', 'v_66', 'w_66', 'u_67', 'v_67', 'w_67', 'u_68', 'v_68', 'w_68', 'u_69', 'v_69', 'w_69', 'u_70', 'v_70', 'w_70', 'u_71', 'v_71', 'w_71', 'u_72', 'v_72', 'w_72', 'u_73', 'v_73', 'w_73', 'u_74', 'v_74', 'w_74', 'u_75', 'v_75', 'w_75', 'u_76', 'v_76', 'w_76', 'u_77', 'v_77', 'w_77', 'u_78', 'v_78', 'w_78', 'u_79', 'v_79', 'w_79', 'u_80', 'v_80', 'w_80', 'u_81', 'v_81', 'w_81', 'u_82', 'v_82', 'w_82', 'u_83', 'v_83', 'w_83', 'u_84', 'v_84', 'w_84', 'u_85', 'v_85', 'w_85', 'u_86', 'v_86', 'w_86', 'u_87', 'v_87', 'w_87', 'u_88', 'v_88', 'w_88', 'u_89', 'v_89', 'w_89', 'u_90', 'v_90', 'w_90', 'u_91', 'v_91', 'w_91', 'u_92', 'v_92', 'w_92', 'u_93', 'v_93', 'w_93', 'u_94', 'v_94', 'w_94', 'u_95', 'v_95', 'w_95', 'u_96', 'v_96', 'w_96', 'u_97', 'v_97', 'w_97', 'u_98', 'v_98', 'w_98', 'u_99', 'v_99', 'w_99', 'u_100', 'v_100', 'w_100', 'u_101', 'v_101', 'w_101', 'u_102', 'v_102', 'w_102', 'u_103', 'v_103', 'w_103', 'u_104', 'v_104', 'w_104', 'u_105', 'v_105', 'w_105', 'u_106', 'v_106', 'w_106', 'u_107', 'v_107', 'w_107', 'u_108', 'v_108', 'w_108', 'u_109', 'v_109', 'w_109', 'u_110', 'v_110', 'w_110', 'u_111', 'v_111', 'w_111', 'u_112', 'v_112', 'w_112', 'u_113', 'v_113', 'w_113', 'u_114', 'v_114', 'w_114', 'u_115', 'v_115', 'w_115', 'u_116', 'v_116', 'w_116', 'u_117', 'v_117', 'w_117', 'u_118', 'v_118', 'w_118', 'u_119', 'v_119', 'w_119', 'u_120', 'v_120', 'w_120', 'u_121', 'v_121', 'w_121', 'u_122', 'v_122', 'w_122', 'u_123', 'v_123', 'w_123', 'u_124', 'v_124', 'w_124', 'u_125', 'v_125', 'w_125', 'u_126', 'v_126', 'w_126', 'u_127', 'v_127', 'w_127', 'u_128', 'v_128', 'w_128', 'u_129', 'v_129', 'w_129', 'u_130', 'v_130', 'w_130', 'u_131', 'v_131', 'w_131', 'u_132', 'v_132', 'w_132', 'u_133', 'v_133', 'w_133', 'u_134', 'v_134', 'w_134', 'u_135', 'v_135', 'w_135', 'u_136', 'v_136', 'w_136', 'u_137', 'v_137', 'w_137', '10u', '10v', 'msl', 'cp', 'skt', 'tcw', 'tp', '2d', '2t', 'z_1']

validation:
  dataset:
  - dataset: ${hardware.paths.data}/${hardware.files.dataset}
    start: 2022
    end: 2023
    frequency: ${data.frequency}
  - dataset: ${hardware.paths.data}/${hardware.files.dataset_ozone}
    start: 2022
    end: 2023
    frequency: ${data.frequency}
  start: 2022
  end: 2023
  drop: ['u_1', 'v_1', 'w_1', 'u_2', 'v_2', 'w_2', 'u_3', 'v_3', 'w_3', 'u_4', 'v_4', 'w_4', 'u_5', 'v_5', 'w_5', 'u_6', 'v_6', 'w_6', 'u_7', 'v_7', 'w_7', 'u_8', 'v_8', 'w_8', 'u_9', 'v_9', 'w_9', 'u_10', 'v_10', 'w_10', 'u_11', 'v_11', 'w_11', 'u_12', 'v_12', 'w_12', 'u_13', 'v_13', 'w_13', 'u_14', 'v_14', 'w_14', 'u_15', 'v_15', 'w_15', 'u_16', 'v_16', 'w_16', 'u_17', 'v_17', 'w_17', 'u_18', 'v_18', 'w_18', 'u_19', 'v_19', 'w_19', 'u_20', 'v_20', 'w_20', 'u_21', 'v_21', 'w_21', 'u_22', 'v_22', 'w_22', 'u_23', 'v_23', 'w_23', 'u_24', 'v_24', 'w_24', 'u_25', 'v_25', 'w_25', 'u_26', 'v_26', 'w_26', 'u_27', 'v_27', 'w_27', 'u_28', 'v_28', 'w_28', 'u_29', 'v_29', 'w_29', 'u_30', 'v_30', 'w_30', 'u_31', 'v_31', 'w_31', 'u_32', 'v_32', 'w_32', 'u_33', 'v_33', 'w_33', 'u_34', 'v_34', 'w_34', 'u_35', 'v_35', 'w_35', 'u_36', 'v_36', 'w_36', 'u_37', 'v_37', 'w_37', 'u_38', 'v_38', 'w_38', 'u_39', 'v_39', 'w_39', 'u_40', 'v_40', 'w_40', 'u_41', 'v_41', 'w_41', 'u_42', 'v_42', 'w_42', 'u_43', 'v_43', 'w_43', 'u_44', 'v_44', 'w_44', 'u_45', 'v_45', 'w_45', 'u_46', 'v_46', 'w_46', 'u_47', 'v_47', 'w_47', 'u_48', 'v_48', 'w_48', 'u_49', 'v_49', 'w_49', 'u_50', 'v_50', 'w_50', 'u_51', 'v_51', 'w_51', 'u_52', 'v_52', 'w_52', 'u_53', 'v_53', 'w_53', 'u_54', 'v_54', 'w_54', 'u_55', 'v_55', 'w_55', 'u_56', 'v_56', 'w_56', 'u_57', 'v_57', 'w_57', 'u_58', 'v_58', 'w_58', 'u_59', 'v_59', 'w_59', 'u_60', 'v_60', 'w_60', 'u_61', 'v_61', 'w_61', 'u_62', 'v_62', 'w_62', 'u_63', 'v_63', 'w_63', 'u_64', 'v_64', 'w_64', 'u_65', 'v_65', 'w_65', 'u_66', 'v_66', 'w_66', 'u_67', 'v_67', 'w_67', 'u_68', 'v_68', 'w_68', 'u_69', 'v_69', 'w_69', 'u_70', 'v_70', 'w_70', 'u_71', 'v_71', 'w_71', 'u_72', 'v_72', 'w_72', 'u_73', 'v_73', 'w_73', 'u_74', 'v_74', 'w_74', 'u_75', 'v_75', 'w_75', 'u_76', 'v_76', 'w_76', 'u_77', 'v_77', 'w_77', 'u_78', 'v_78', 'w_78', 'u_79', 'v_79', 'w_79', 'u_80', 'v_80', 'w_80', 'u_81', 'v_81', 'w_81', 'u_82', 'v_82', 'w_82', 'u_83', 'v_83', 'w_83', 'u_84', 'v_84', 'w_84', 'u_85', 'v_85', 'w_85', 'u_86', 'v_86', 'w_86', 'u_87', 'v_87', 'w_87', 'u_88', 'v_88', 'w_88', 'u_89', 'v_89', 'w_89', 'u_90', 'v_90', 'w_90', 'u_91', 'v_91', 'w_91', 'u_92', 'v_92', 'w_92', 'u_93', 'v_93', 'w_93', 'u_94', 'v_94', 'w_94', 'u_95', 'v_95', 'w_95', 'u_96', 'v_96', 'w_96', 'u_97', 'v_97', 'w_97', 'u_98', 'v_98', 'w_98', 'u_99', 'v_99', 'w_99', 'u_100', 'v_100', 'w_100', 'u_101', 'v_101', 'w_101', 'u_102', 'v_102', 'w_102', 'u_103', 'v_103', 'w_103', 'u_104', 'v_104', 'w_104', 'u_105', 'v_105', 'w_105', 'u_106', 'v_106', 'w_106', 'u_107', 'v_107', 'w_107', 'u_108', 'v_108', 'w_108', 'u_109', 'v_109', 'w_109', 'u_110', 'v_110', 'w_110', 'u_111', 'v_111', 'w_111', 'u_112', 'v_112', 'w_112', 'u_113', 'v_113', 'w_113', 'u_114', 'v_114', 'w_114', 'u_115', 'v_115', 'w_115', 'u_116', 'v_116', 'w_116', 'u_117', 'v_117', 'w_117', 'u_118', 'v_118', 'w_118', 'u_119', 'v_119', 'w_119', 'u_120', 'v_120', 'w_120', 'u_121', 'v_121', 'w_121', 'u_122', 'v_122', 'w_122', 'u_123', 'v_123', 'w_123', 'u_124', 'v_124', 'w_124', 'u_125', 'v_125', 'w_125', 'u_126', 'v_126', 'w_126', 'u_127', 'v_127', 'w_127', 'u_128', 'v_128', 'w_128', 'u_129', 'v_129', 'w_129', 'u_130', 'v_130', 'w_130', 'u_131', 'v_131', 'w_131', 'u_132', 'v_132', 'w_132', 'u_133', 'v_133', 'w_133', 'u_134', 'v_134', 'w_134', 'u_135', 'v_135', 'w_135', 'u_136', 'v_136', 'w_136', 'u_137', 'v_137', 'w_137', '10u', '10v', 'msl', 'cp', 'skt', 'tcw', 'tp', '2d', '2t', 'z_1']

validation_rollout: 1 # number of rollouts to use for validation, must be equal or greater than rollout expected by callbacks

test:
  dataset:
  - dataset: ${hardware.paths.data}/${hardware.files.dataset}
    start: 2024
    end: null
    frequency: ${data.frequency}
  - dataset: ${hardware.paths.data}/${hardware.files.dataset_ozone}
    start: 2024
    end: null
    frequency: ${data.frequency}
  start: 2024
  end: null
  drop: ['u_1', 'v_1', 'w_1', 'u_2', 'v_2', 'w_2', 'u_3', 'v_3', 'w_3', 'u_4', 'v_4', 'w_4', 'u_5', 'v_5', 'w_5', 'u_6', 'v_6', 'w_6', 'u_7', 'v_7', 'w_7', 'u_8', 'v_8', 'w_8', 'u_9', 'v_9', 'w_9', 'u_10', 'v_10', 'w_10', 'u_11', 'v_11', 'w_11', 'u_12', 'v_12', 'w_12', 'u_13', 'v_13', 'w_13', 'u_14', 'v_14', 'w_14', 'u_15', 'v_15', 'w_15', 'u_16', 'v_16', 'w_16', 'u_17', 'v_17', 'w_17', 'u_18', 'v_18', 'w_18', 'u_19', 'v_19', 'w_19', 'u_20', 'v_20', 'w_20', 'u_21', 'v_21', 'w_21', 'u_22', 'v_22', 'w_22', 'u_23', 'v_23', 'w_23', 'u_24', 'v_24', 'w_24', 'u_25', 'v_25', 'w_25', 'u_26', 'v_26', 'w_26', 'u_27', 'v_27', 'w_27', 'u_28', 'v_28', 'w_28', 'u_29', 'v_29', 'w_29', 'u_30', 'v_30', 'w_30', 'u_31', 'v_31', 'w_31', 'u_32', 'v_32', 'w_32', 'u_33', 'v_33', 'w_33', 'u_34', 'v_34', 'w_34', 'u_35', 'v_35', 'w_35', 'u_36', 'v_36', 'w_36', 'u_37', 'v_37', 'w_37', 'u_38', 'v_38', 'w_38', 'u_39', 'v_39', 'w_39', 'u_40', 'v_40', 'w_40', 'u_41', 'v_41', 'w_41', 'u_42', 'v_42', 'w_42', 'u_43', 'v_43', 'w_43', 'u_44', 'v_44', 'w_44', 'u_45', 'v_45', 'w_45', 'u_46', 'v_46', 'w_46', 'u_47', 'v_47', 'w_47', 'u_48', 'v_48', 'w_48', 'u_49', 'v_49', 'w_49', 'u_50', 'v_50', 'w_50', 'u_51', 'v_51', 'w_51', 'u_52', 'v_52', 'w_52', 'u_53', 'v_53', 'w_53', 'u_54', 'v_54', 'w_54', 'u_55', 'v_55', 'w_55', 'u_56', 'v_56', 'w_56', 'u_57', 'v_57', 'w_57', 'u_58', 'v_58', 'w_58', 'u_59', 'v_59', 'w_59', 'u_60', 'v_60', 'w_60', 'u_61', 'v_61', 'w_61', 'u_62', 'v_62', 'w_62', 'u_63', 'v_63', 'w_63', 'u_64', 'v_64', 'w_64', 'u_65', 'v_65', 'w_65', 'u_66', 'v_66', 'w_66', 'u_67', 'v_67', 'w_67', 'u_68', 'v_68', 'w_68', 'u_69', 'v_69', 'w_69', 'u_70', 'v_70', 'w_70', 'u_71', 'v_71', 'w_71', 'u_72', 'v_72', 'w_72', 'u_73', 'v_73', 'w_73', 'u_74', 'v_74', 'w_74', 'u_75', 'v_75', 'w_75', 'u_76', 'v_76', 'w_76', 'u_77', 'v_77', 'w_77', 'u_78', 'v_78', 'w_78', 'u_79', 'v_79', 'w_79', 'u_80', 'v_80', 'w_80', 'u_81', 'v_81', 'w_81', 'u_82', 'v_82', 'w_82', 'u_83', 'v_83', 'w_83', 'u_84', 'v_84', 'w_84', 'u_85', 'v_85', 'w_85', 'u_86', 'v_86', 'w_86', 'u_87', 'v_87', 'w_87', 'u_88', 'v_88', 'w_88', 'u_89', 'v_89', 'w_89', 'u_90', 'v_90', 'w_90', 'u_91', 'v_91', 'w_91', 'u_92', 'v_92', 'w_92', 'u_93', 'v_93', 'w_93', 'u_94', 'v_94', 'w_94', 'u_95', 'v_95', 'w_95', 'u_96', 'v_96', 'w_96', 'u_97', 'v_97', 'w_97', 'u_98', 'v_98', 'w_98', 'u_99', 'v_99', 'w_99', 'u_100', 'v_100', 'w_100', 'u_101', 'v_101', 'w_101', 'u_102', 'v_102', 'w_102', 'u_103', 'v_103', 'w_103', 'u_104', 'v_104', 'w_104', 'u_105', 'v_105', 'w_105', 'u_106', 'v_106', 'w_106', 'u_107', 'v_107', 'w_107', 'u_108', 'v_108', 'w_108', 'u_109', 'v_109', 'w_109', 'u_110', 'v_110', 'w_110', 'u_111', 'v_111', 'w_111', 'u_112', 'v_112', 'w_112', 'u_113', 'v_113', 'w_113', 'u_114', 'v_114', 'w_114', 'u_115', 'v_115', 'w_115', 'u_116', 'v_116', 'w_116', 'u_117', 'v_117', 'w_117', 'u_118', 'v_118', 'w_118', 'u_119', 'v_119', 'w_119', 'u_120', 'v_120', 'w_120', 'u_121', 'v_121', 'w_121', 'u_122', 'v_122', 'w_122', 'u_123', 'v_123', 'w_123', 'u_124', 'v_124', 'w_124', 'u_125', 'v_125', 'w_125', 'u_126', 'v_126', 'w_126', 'u_127', 'v_127', 'w_127', 'u_128', 'v_128', 'w_128', 'u_129', 'v_129', 'w_129', 'u_130', 'v_130', 'w_130', 'u_131', 'v_131', 'w_131', 'u_132', 'v_132', 'w_132', 'u_133', 'v_133', 'w_133', 'u_134', 'v_134', 'w_134', 'u_135', 'v_135', 'w_135', 'u_136', 'v_136', 'w_136', 'u_137', 'v_137', 'w_137', '10u', '10v', 'msl', 'cp', 'skt', 'tcw', 'tp', '2d', '2t', 'z_1']

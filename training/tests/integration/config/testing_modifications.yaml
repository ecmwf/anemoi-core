# Modifications for testing training cycles
dataloader:
  num_workers:
    training: 2
    validation: 2
  batch_size:
    training: 3
    validation: 3
  limit_batches:
    training: 3
    validation: 3

diagnostics:
  log:
    mlflow:
      _target_: anemoi.training.diagnostics.mlflow.logger.AnemoiMLflowLogger
      enabled: False
      tracking_uri: null # override '???'

system:
  hardware:
    accelerator: auto
    num_gpus_per_node: 1
    num_nodes: 1
    num_gpus_per_model: 1

  output:
    # We overwrite this in the test to use pytest tmp_path but need a value for hydra
    root: ${oc.env:PWD}/tmp_output/

  input:
    graph: null
    truncation: null
    truncation_inv: null

graph:
  overwrite: True

model:
  num_channels: 16
  processor:
    num_layers: 2
    num_chunks: 2

training:
  max_epochs: 2
  lr:
    warmup: 1
    rate: 10e-5
